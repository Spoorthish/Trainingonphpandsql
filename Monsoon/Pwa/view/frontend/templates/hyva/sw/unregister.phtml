<?php
/**
 * Copyright Â© Monsoon Consulting. All rights reserved.
 * @license   Open Software License ("OSL") v. 3.0
 */

/** @var $block \Magento\Framework\View\Element\Template */
/** @var $viewModel Monsoon\Pwa\ViewModel\ServiceWorker */

$viewModel = $block->getViewModel();
?>
<?php if ($viewModel->isUnregisterAllowed()): ?>
<script defer>
    if (navigator.serviceWorker) {
        navigator.serviceWorker.getRegistrations().then(
            function (registrations) {
                registrations.forEach(registration => registration.unregister());
            }
        );
    }
</script>
<?php endif ?>
